<section class="section">
  <div class="columns is-mobile is-centered">
    <div class="column column is-three-quarters-mobile is-two-thirds-tablet is-half-desktop is-one-third-widescreen is-one-quarter-fullhd">
      <h1 class="level-item title is-spaced is-marginless is-capitalized is-centered"><%= @routine.title %></h1>

      <div>
          <p class="subtitle is-5 level-item">
            <span><strong><%= @routine_flow.flow_steps.upcoming.size + 1 %> </strong> flow <%= "step".pluralize(@routine_flow.flow_steps.upcoming.size + 1) %> remaining!</span>
          </p>

        <div class="level-item">
            <progress class="progress is-success" value="60" max="100">60%</progress>
        </div>
      </div>

      <article class="box has-text-centered">
        <div class="box">
          <%= image_tag 'target.png' %>
        </div>
        <p class="title is-3 is-spaced is-marginless is-capitalized is-centered">
          <span id="current-flow-step-title"><%= @routine_flow.flow_steps.active.first.title %></span>
        </p>
        </br>

        <div class="buttons">
          <% if @routine_flow.flow_steps.upcoming.any? %>
            <%= link_to "Finish Step", routine_routine_flow_path(@routine, @routine_flow) , method: :put, class: "button is-large is-info is-fullwidth" %>
          <% else %>
            <%= link_to "Finish Step", routine_routine_flow_path(@routine, @routine_flow) , method: :delete, class: "button is-large is-info is-fullwidth" %>
          <% end %>
        </div>
      </article>

      <div>
        <%= render @routine_flow.flow_steps.upcoming %>
      </div>
      <br>

    </div> <!-- end of colum -->
  </div> <!-- end of colums -->
</section>
